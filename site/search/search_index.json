{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Documenta\u00e7\u00e3o de Webhook da Checkmob","text":"<p>Bem-vindo \u00e0 documenta\u00e7\u00e3o de Webhook da Checkmob. Este guia ajudar\u00e1 voc\u00ea a entender como integrar e trabalhar com o sistema de webhook da Checkmob.</p>"},{"location":"#o-que-e-um-webhook","title":"O que \u00e9 um Webhook?","text":"<p>Um webhook \u00e9 uma forma da Checkmob enviar dados em tempo real para sua aplica\u00e7\u00e3o sempre que eventos espec\u00edficos ocorrerem. Em vez de sua aplica\u00e7\u00e3o precisar consultar constantemente os servidores da Checkmob por atualiza\u00e7\u00f5es, a Checkmob enviar\u00e1 automaticamente os dados para seu endpoint especificado.</p>"},{"location":"#principais-recursos","title":"Principais Recursos","text":"<ul> <li>Notifica\u00e7\u00f5es de eventos em tempo real</li> <li>Comunica\u00e7\u00e3o segura</li> <li>Suporte a m\u00faltiplos tipos de eventos</li> <li>F\u00e1cil integra\u00e7\u00e3o</li> <li>Sistema de entrega confi\u00e1vel</li> </ul>"},{"location":"#comecando","title":"Come\u00e7ando","text":"<p>Para come\u00e7ar com os webhooks da Checkmob:</p> <ol> <li>Leia a Introdu\u00e7\u00e3o para entender os conceitos b\u00e1sicos</li> <li>Siga o guia de Configura\u00e7\u00e3o para configurar seu webhook</li> <li>Aprenda sobre os Eventos dispon\u00edveis</li> <li>Revise as melhores pr\u00e1ticas de Seguran\u00e7a</li> <li>Confira os Exemplos para orienta\u00e7\u00e3o de implementa\u00e7\u00e3o</li> </ol>"},{"location":"#suporte","title":"Suporte","text":"<p>Se precisar de ajuda com sua integra\u00e7\u00e3o de webhook, entre em contato com nossa equipe de suporte em support@checkmob.com</p>"},{"location":"webhook/configuration/","title":"Configura\u00e7\u00e3o do Webhook","text":""},{"location":"webhook/configuration/#configurando-seu-webhook","title":"Configurando Seu Webhook","text":""},{"location":"webhook/configuration/#1-criar-um-endpoint","title":"1. Criar um Endpoint","text":"<p>Primeiro, crie um endpoint em seu servidor que possa receber requisi\u00e7\u00f5es HTTP POST. Aqui est\u00e1 um exemplo usando Node.js:</p> <pre><code>const express = require('express');\nconst app = express();\n\napp.use(express.json());\n\napp.post('/webhook', (req, res) =&gt; {\n    const event = req.body;\n\n    // Processa o webhook\n    console.log('Webhook recebido:', event);\n\n    // Sempre responda com um c\u00f3digo de status 2xx\n    res.status(200).json({ received: true });\n});\n\napp.listen(3000, () =&gt; {\n    console.log('Servidor webhook rodando na porta 3000');\n});\n</code></pre>"},{"location":"webhook/configuration/#2-configurar-no-painel-da-checkmob","title":"2. Configurar no Painel da Checkmob","text":"<ol> <li>Fa\u00e7a login no painel da Checkmob</li> <li>Navegue at\u00e9 Configura\u00e7\u00f5es &gt; Integra\u00e7\u00f5es &gt; Webhooks</li> <li>Clique em \"Adicionar Novo Webhook\"</li> <li>Digite sua URL de webhook</li> <li>Selecione os eventos que deseja receber</li> <li>Salve sua configura\u00e7\u00e3o</li> </ol>"},{"location":"webhook/configuration/#3-requisitos-da-url-do-webhook","title":"3. Requisitos da URL do Webhook","text":"<ul> <li>Deve ser HTTPS (exceto para localhost durante o desenvolvimento)</li> <li>Deve ser publicamente acess\u00edvel</li> <li>Deve responder dentro de 5 segundos</li> <li>Deve retornar um c\u00f3digo de status 2xx</li> </ul>"},{"location":"webhook/configuration/#configuracoes-do-webhook","title":"Configura\u00e7\u00f5es do Webhook","text":""},{"location":"webhook/configuration/#politica-de-nova-tentativa","title":"Pol\u00edtica de Nova Tentativa","text":"<p>Se seu servidor n\u00e3o responder com sucesso, a Checkmob tentar\u00e1 reenviar o webhook:</p> <ul> <li>Primeira tentativa: 1 minuto ap\u00f3s a falha</li> <li>Segunda tentativa: 5 minutos ap\u00f3s a falha</li> <li>Terceira tentativa: 15 minutos ap\u00f3s a falha</li> <li>Tentativa final: 1 hora ap\u00f3s a falha</li> </ul>"},{"location":"webhook/configuration/#seguranca","title":"Seguran\u00e7a","text":"<p>Ative estes recursos de seguran\u00e7a nas configura\u00e7\u00f5es do webhook:</p> <ul> <li>Chave Secreta: Gere uma chave secreta para verificar assinaturas do webhook</li> <li>Lista de IPs Permitidos: Restrinja chamadas de webhook a endere\u00e7os IP espec\u00edficos</li> <li>Verifica\u00e7\u00e3o SSL: Garanta que todas as chamadas de webhook usem HTTPS</li> </ul>"},{"location":"webhook/configuration/#testando-seu-webhook","title":"Testando Seu Webhook","text":"<p>Use o recurso \"Testar Webhook\" no painel da Checkmob para enviar um evento de teste para seu endpoint. O payload de teste ser\u00e1 assim:</p> <pre><code>{\n    \"event\": \"test\",\n    \"timestamp\": \"2024-03-14T12:00:00Z\",\n    \"data\": {\n        \"message\": \"Este \u00e9 um webhook de teste\"\n    }\n}\n</code></pre>"},{"location":"webhook/configuration/#monitoramento","title":"Monitoramento","text":"<p>Monitore a sa\u00fade do seu webhook no painel da Checkmob:</p> <ul> <li>Taxa de sucesso</li> <li>Tempos de resposta</li> <li>Entregas com falha</li> <li>Tentativas de nova entrega</li> </ul>"},{"location":"webhook/configuration/#solucao-de-problemas","title":"Solu\u00e7\u00e3o de Problemas","text":"<p>Problemas comuns e solu\u00e7\u00f5es:</p> <ol> <li>Erros de Timeout</li> <li>Garanta que seu servidor responda dentro de 5 segundos</li> <li> <p>Otimize o processamento do webhook</p> </li> <li> <p>Erros de SSL</p> </li> <li>Verifique se seu certificado SSL \u00e9 v\u00e1lido</li> <li> <p>Verifique a configura\u00e7\u00e3o adequada de HTTPS</p> </li> <li> <p>Falhas de Autentica\u00e7\u00e3o</p> </li> <li>Verifique se sua chave secreta est\u00e1 configurada corretamente</li> <li> <p>Verifique a l\u00f3gica de verifica\u00e7\u00e3o de assinatura</p> </li> <li> <p>Problemas de Conex\u00e3o</p> </li> <li>Garanta que seu servidor seja publicamente acess\u00edvel</li> <li>Verifique as configura\u00e7\u00f5es do firewall </li> </ol>"},{"location":"webhook/events/","title":"Eventos do Webhook","text":"<p>Os webhooks da Checkmob suportam v\u00e1rios eventos aos quais voc\u00ea pode se inscrever. Cada evento cont\u00e9m dados espec\u00edficos relevantes para o tipo de evento.</p>"},{"location":"webhook/events/#estrutura-do-evento","title":"Estrutura do Evento","text":"<p>Todos os eventos de webhook seguem esta estrutura b\u00e1sica:</p> <pre><code>{\n    \"event\": \"nome_do_evento\",\n    \"timestamp\": \"2024-03-14T12:00:00Z\",\n    \"data\": {\n        // Dados espec\u00edficos do evento\n    }\n}\n</code></pre>"},{"location":"webhook/events/#eventos-disponiveis","title":"Eventos Dispon\u00edveis","text":""},{"location":"webhook/events/#eventos-de-lead","title":"Eventos de Lead","text":""},{"location":"webhook/events/#leadcreated","title":"<code>lead.created</code>","text":"<p>Disparado quando um novo lead \u00e9 criado.</p> <pre><code>{\n    \"event\": \"lead.created\",\n    \"timestamp\": \"2024-03-14T12:00:00Z\",\n    \"data\": {\n        \"lead_id\": \"12345\",\n        \"name\": \"Jo\u00e3o Silva\",\n        \"email\": \"joao@exemplo.com\",\n        \"phone\": \"+5511999999999\",\n        \"source\": \"website\",\n        \"created_at\": \"2024-03-14T12:00:00Z\"\n    }\n}\n</code></pre>"},{"location":"webhook/events/#leadupdated","title":"<code>lead.updated</code>","text":"<p>Disparado quando as informa\u00e7\u00f5es de um lead s\u00e3o atualizadas.</p> <pre><code>{\n    \"event\": \"lead.updated\",\n    \"timestamp\": \"2024-03-14T12:00:00Z\",\n    \"data\": {\n        \"lead_id\": \"12345\",\n        \"changes\": {\n            \"name\": \"Jo\u00e3o Silva Atualizado\",\n            \"email\": \"joao.atualizado@exemplo.com\"\n        },\n        \"updated_at\": \"2024-03-14T12:00:00Z\"\n    }\n}\n</code></pre>"},{"location":"webhook/events/#eventos-de-campanha","title":"Eventos de Campanha","text":""},{"location":"webhook/events/#campaignstarted","title":"<code>campaign.started</code>","text":"<p>Disparado quando uma campanha \u00e9 iniciada.</p> <pre><code>{\n    \"event\": \"campaign.started\",\n    \"timestamp\": \"2024-03-14T12:00:00Z\",\n    \"data\": {\n        \"campaign_id\": \"789\",\n        \"name\": \"Promo\u00e7\u00e3o de Ver\u00e3o\",\n        \"start_date\": \"2024-03-14T12:00:00Z\",\n        \"target_leads\": 1000\n    }\n}\n</code></pre>"},{"location":"webhook/events/#campaigncompleted","title":"<code>campaign.completed</code>","text":"<p>Disparado quando uma campanha \u00e9 conclu\u00edda.</p> <pre><code>{\n    \"event\": \"campaign.completed\",\n    \"timestamp\": \"2024-03-14T12:00:00Z\",\n    \"data\": {\n        \"campaign_id\": \"789\",\n        \"name\": \"Promo\u00e7\u00e3o de Ver\u00e3o\",\n        \"end_date\": \"2024-03-14T12:00:00Z\",\n        \"total_leads\": 950,\n        \"success_rate\": 95\n    }\n}\n</code></pre>"},{"location":"webhook/events/#eventos-de-mensagem","title":"Eventos de Mensagem","text":""},{"location":"webhook/events/#messagesent","title":"<code>message.sent</code>","text":"<p>Disparado quando uma mensagem \u00e9 enviada para um lead.</p> <pre><code>{\n    \"event\": \"message.sent\",\n    \"timestamp\": \"2024-03-14T12:00:00Z\",\n    \"data\": {\n        \"message_id\": \"msg_123\",\n        \"lead_id\": \"12345\",\n        \"type\": \"sms\",\n        \"content\": \"Ol\u00e1! Esta \u00e9 uma mensagem de teste.\",\n        \"sent_at\": \"2024-03-14T12:00:00Z\"\n    }\n}\n</code></pre>"},{"location":"webhook/events/#messagedelivered","title":"<code>message.delivered</code>","text":"<p>Disparado quando uma mensagem \u00e9 entregue ao destinat\u00e1rio.</p> <pre><code>{\n    \"event\": \"message.delivered\",\n    \"timestamp\": \"2024-03-14T12:00:00Z\",\n    \"data\": {\n        \"message_id\": \"msg_123\",\n        \"lead_id\": \"12345\",\n        \"delivered_at\": \"2024-03-14T12:00:01Z\"\n    }\n}\n</code></pre>"},{"location":"webhook/events/#melhores-praticas-para-tratamento-de-eventos","title":"Melhores Pr\u00e1ticas para Tratamento de Eventos","text":"<ol> <li>Idempot\u00eancia</li> <li>Processe cada evento apenas uma vez</li> <li>Use IDs de eventos para rastrear eventos processados</li> <li> <p>Implemente l\u00f3gica de deduplica\u00e7\u00e3o</p> </li> <li> <p>Tratamento de Erros</p> </li> <li>Registre todos os eventos recebidos</li> <li>Implemente tratamento adequado de erros</li> <li> <p>Retorne c\u00f3digos de status apropriados</p> </li> <li> <p>Desempenho</p> </li> <li>Processe eventos de forma ass\u00edncrona quando poss\u00edvel</li> <li>Responda rapidamente \u00e0s requisi\u00e7\u00f5es do webhook</li> <li>Implemente enfileiramento adequado para eventos de alto volume</li> </ol>"},{"location":"webhook/events/#testando-eventos","title":"Testando Eventos","text":"<p>Voc\u00ea pode testar cada tipo de evento usando o painel da Checkmob:</p> <ol> <li>V\u00e1 para Configura\u00e7\u00f5es de Webhook</li> <li>Selecione \"Testar Evento\"</li> <li>Escolha o tipo de evento</li> <li>Envie um evento de teste para seu endpoint</li> </ol>"},{"location":"webhook/events/#historico-de-eventos","title":"Hist\u00f3rico de Eventos","text":"<p>Acesse o hist\u00f3rico de eventos do seu webhook no painel da Checkmob:</p> <ul> <li>Visualize todos os eventos enviados para seu webhook</li> <li>Verifique o status de entrega</li> <li>Revise os payloads dos eventos</li> <li>Monitore taxas de sucesso/falha </li> </ul>"},{"location":"webhook/examples/","title":"Exemplos de Implementa\u00e7\u00e3o","text":"<p>Esta p\u00e1gina cont\u00e9m exemplos pr\u00e1ticos de como implementar webhooks da Checkmob em diferentes linguagens de programa\u00e7\u00e3o.</p>"},{"location":"webhook/examples/#nodejs","title":"Node.js","text":""},{"location":"webhook/examples/#exemplo-basico","title":"Exemplo B\u00e1sico","text":"<pre><code>const express = require('express');\nconst crypto = require('crypto');\nconst app = express();\n\napp.use(express.json());\n\n// Verifica a assinatura do webhook\nfunction verifyWebhookSignature(payload, signature, secret) {\n    const hmac = crypto.createHmac('sha256', secret);\n    const calculatedSignature = hmac.update(JSON.stringify(payload)).digest('hex');\n    return crypto.timingSafeEqual(\n        Buffer.from(signature),\n        Buffer.from(calculatedSignature)\n    );\n}\n\n// Endpoint do webhook\napp.post('/webhook', (req, res) =&gt; {\n    const signature = req.headers['x-checkmob-signature'];\n\n    // Verifica a assinatura\n    if (!verifyWebhookSignature(req.body, signature, process.env.WEBHOOK_SECRET)) {\n        return res.status(401).json({ error: 'Assinatura inv\u00e1lida' });\n    }\n\n    // Processa o evento\n    const event = req.body;\n\n    switch (event.event) {\n        case 'lead.created':\n            handleLeadCreated(event.data);\n            break;\n        case 'message.sent':\n            handleMessageSent(event.data);\n            break;\n        default:\n            console.log('Evento n\u00e3o tratado:', event.event);\n    }\n\n    res.status(200).json({ received: true });\n});\n\nfunction handleLeadCreated(data) {\n    console.log('Novo lead criado:', data);\n    // Implemente sua l\u00f3gica aqui\n}\n\nfunction handleMessageSent(data) {\n    console.log('Mensagem enviada:', data);\n    // Implemente sua l\u00f3gica aqui\n}\n\napp.listen(3000, () =&gt; {\n    console.log('Servidor webhook rodando na porta 3000');\n});\n</code></pre>"},{"location":"webhook/examples/#python","title":"Python","text":""},{"location":"webhook/examples/#exemplo-com-flask","title":"Exemplo com Flask","text":"<pre><code>from flask import Flask, request, jsonify\nimport hmac\nimport hashlib\nimport os\n\napp = Flask(__name__)\n\ndef verify_webhook_signature(payload, signature, secret):\n    expected = hmac.new(\n        secret.encode('utf-8'),\n        payload,\n        hashlib.sha256\n    ).hexdigest()\n    return hmac.compare_digest(expected, signature)\n\n@app.route('/webhook', methods=['POST'])\ndef webhook():\n    # Obt\u00e9m a assinatura do cabe\u00e7alho\n    signature = request.headers.get('X-Checkmob-Signature')\n\n    # Verifica a assinatura\n    if not verify_webhook_signature(\n        request.get_data(),\n        signature,\n        os.environ['WEBHOOK_SECRET']\n    ):\n        return jsonify({'error': 'Assinatura inv\u00e1lida'}), 401\n\n    # Processa o evento\n    event = request.json\n\n    if event['event'] == 'lead.created':\n        handle_lead_created(event['data'])\n    elif event['event'] == 'message.sent':\n        handle_message_sent(event['data'])\n    else:\n        print(f'Evento n\u00e3o tratado: {event[\"event\"]}')\n\n    return jsonify({'received': True})\n\ndef handle_lead_created(data):\n    print('Novo lead criado:', data)\n    # Implemente sua l\u00f3gica aqui\n\ndef handle_message_sent(data):\n    print('Mensagem enviada:', data)\n    # Implemente sua l\u00f3gica aqui\n\nif __name__ == '__main__':\n    app.run(port=3000)\n</code></pre>"},{"location":"webhook/examples/#php","title":"PHP","text":""},{"location":"webhook/examples/#exemplo-com-laravel","title":"Exemplo com Laravel","text":"<pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Log;\n\nclass WebhookController extends Controller\n{\n    public function handle(Request $request)\n    {\n        // Verifica a assinatura\n        $signature = $request-&gt;header('X-Checkmob-Signature');\n        $payload = $request-&gt;getContent();\n\n        if (!$this-&gt;verifySignature($payload, $signature)) {\n            return response()-&gt;json(['error' =&gt; 'Assinatura inv\u00e1lida'], 401);\n        }\n\n        // Processa o evento\n        $event = $request-&gt;json()-&gt;all();\n\n        switch ($event['event']) {\n            case 'lead.created':\n                $this-&gt;handleLeadCreated($event['data']);\n                break;\n            case 'message.sent':\n                $this-&gt;handleMessageSent($event['data']);\n                break;\n            default:\n                Log::info('Evento n\u00e3o tratado: ' . $event['event']);\n        }\n\n        return response()-&gt;json(['received' =&gt; true]);\n    }\n\n    private function verifySignature($payload, $signature)\n    {\n        $expected = hash_hmac(\n            'sha256',\n            $payload,\n            env('WEBHOOK_SECRET')\n        );\n\n        return hash_equals($expected, $signature);\n    }\n\n    private function handleLeadCreated($data)\n    {\n        Log::info('Novo lead criado:', $data);\n        // Implemente sua l\u00f3gica aqui\n    }\n\n    private function handleMessageSent($data)\n    {\n        Log::info('Mensagem enviada:', $data);\n        // Implemente sua l\u00f3gica aqui\n    }\n}\n</code></pre>"},{"location":"webhook/examples/#boas-praticas-nos-exemplos","title":"Boas Pr\u00e1ticas nos Exemplos","text":"<ol> <li>Verifica\u00e7\u00e3o de Seguran\u00e7a</li> <li>Todos os exemplos incluem verifica\u00e7\u00e3o de assinatura</li> <li>Uso de vari\u00e1veis de ambiente para chaves secretas</li> <li> <p>Valida\u00e7\u00e3o de dados recebidos</p> </li> <li> <p>Tratamento de Eventos</p> </li> <li>Estrutura organizada para diferentes tipos de eventos</li> <li>Logging adequado</li> <li> <p>Respostas apropriadas</p> </li> <li> <p>Configura\u00e7\u00e3o</p> </li> <li>Uso de HTTPS</li> <li>Configura\u00e7\u00e3o de timeouts</li> <li>Tratamento de erros</li> </ol>"},{"location":"webhook/examples/#testando-os-exemplos","title":"Testando os Exemplos","text":"<ol> <li> <p>Configure sua chave secreta:    <pre><code>export WEBHOOK_SECRET=sua_chave_secreta\n</code></pre></p> </li> <li> <p>Inicie o servidor:    <pre><code># Node.js\nnode app.js\n\n# Python\npython app.py\n\n# PHP/Laravel\nphp artisan serve\n</code></pre></p> </li> <li> <p>Use o painel da Checkmob para enviar eventos de teste</p> </li> <li> <p>Verifique os logs para confirmar o recebimento e processamento dos eventos </p> </li> </ol>"},{"location":"webhook/introduction/","title":"Introdu\u00e7\u00e3o aos Webhooks da Checkmob","text":""},{"location":"webhook/introduction/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>Os webhooks da Checkmob fornecem uma maneira poderosa de receber notifica\u00e7\u00f5es em tempo real sobre eventos que ocorrem em sua conta Checkmob. Isso permite que voc\u00ea construa integra\u00e7\u00f5es que respondam imediatamente \u00e0s mudan\u00e7as em seus dados da Checkmob.</p>"},{"location":"webhook/introduction/#como-os-webhooks-funcionam","title":"Como os Webhooks Funcionam","text":"<ol> <li>Evento Ocorre: Quando um evento espec\u00edfico acontece na Checkmob (ex: um novo lead \u00e9 criado)</li> <li>Notifica\u00e7\u00e3o Enviada: A Checkmob envia uma requisi\u00e7\u00e3o HTTP POST para sua URL de webhook</li> <li>Seu Sistema Processa: Seu servidor recebe os dados e pode tomar a a\u00e7\u00e3o apropriada</li> <li>Resposta Necess\u00e1ria: Seu servidor deve responder com um c\u00f3digo de status 2xx dentro de 5 segundos</li> </ol>"},{"location":"webhook/introduction/#fluxo-do-webhook","title":"Fluxo do Webhook","text":"<pre><code>sequenceDiagram\n    participant C as Checkmob\n    participant Y as Seu Servidor\n\n    C-&gt;&gt;Y: HTTP POST com dados do evento\n    Note over Y: Processa o evento\n    Y-&gt;&gt;C: Resposta 2xx\n</code></pre>"},{"location":"webhook/introduction/#beneficios","title":"Benef\u00edcios","text":"<ul> <li>Atualiza\u00e7\u00f5es em Tempo Real: Receba notifica\u00e7\u00f5es instant\u00e2neas sobre eventos importantes</li> <li>Eficiente: N\u00e3o h\u00e1 necessidade de consultar constantemente os servidores da Checkmob</li> <li>Confi\u00e1vel: Mecanismo autom\u00e1tico de nova tentativa para entregas com falha</li> <li>Flex\u00edvel: Processe eventos de acordo com suas necessidades de neg\u00f3cio</li> </ul>"},{"location":"webhook/introduction/#casos-de-uso-comuns","title":"Casos de Uso Comuns","text":"<ul> <li>Automa\u00e7\u00e3o de gerenciamento de leads</li> <li>Sincroniza\u00e7\u00e3o com CRM</li> <li>An\u00e1lises personalizadas</li> <li>Sistemas de notifica\u00e7\u00e3o</li> <li>Backup de dados</li> <li>Integra\u00e7\u00e3o com outros servi\u00e7os</li> </ul>"},{"location":"webhook/introduction/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ul> <li>Aprenda como configurar seu webhook</li> <li>Explore os eventos dispon\u00edveis</li> <li>Revise as melhores pr\u00e1ticas de seguran\u00e7a</li> <li>Confira os exemplos de implementa\u00e7\u00e3o </li> </ul>"},{"location":"webhook/security/","title":"Seguran\u00e7a do Webhook","text":""},{"location":"webhook/security/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>A seguran\u00e7a \u00e9 um aspecto crucial ao implementar webhooks. Este guia descreve as melhores pr\u00e1ticas para garantir que suas integra\u00e7\u00f5es de webhook sejam seguras e confi\u00e1veis.</p>"},{"location":"webhook/security/#verificacao-de-assinatura","title":"Verifica\u00e7\u00e3o de Assinatura","text":""},{"location":"webhook/security/#como-funciona","title":"Como Funciona","text":"<ol> <li>A Checkmob gera uma assinatura HMAC-SHA256 usando sua chave secreta</li> <li>A assinatura \u00e9 enviada no cabe\u00e7alho <code>X-Checkmob-Signature</code></li> <li>Seu servidor deve verificar a assinatura antes de processar o webhook</li> </ol>"},{"location":"webhook/security/#exemplo-de-implementacao","title":"Exemplo de Implementa\u00e7\u00e3o","text":"<pre><code>const crypto = require('crypto');\n\nfunction verifyWebhookSignature(payload, signature, secret) {\n    const hmac = crypto.createHmac('sha256', secret);\n    const calculatedSignature = hmac.update(JSON.stringify(payload)).digest('hex');\n    return crypto.timingSafeEqual(\n        Buffer.from(signature),\n        Buffer.from(calculatedSignature)\n    );\n}\n\napp.post('/webhook', (req, res) =&gt; {\n    const signature = req.headers['x-checkmob-signature'];\n\n    if (!verifyWebhookSignature(req.body, signature, process.env.WEBHOOK_SECRET)) {\n        return res.status(401).json({ error: 'Assinatura inv\u00e1lida' });\n    }\n\n    // Processa o webhook\n    res.status(200).json({ received: true });\n});\n</code></pre>"},{"location":"webhook/security/#lista-de-ips-permitidos","title":"Lista de IPs Permitidos","text":""},{"location":"webhook/security/#configuracao","title":"Configura\u00e7\u00e3o","text":"<ol> <li>Acesse o painel da Checkmob</li> <li>V\u00e1 para Configura\u00e7\u00f5es &gt; Integra\u00e7\u00f5es &gt; Webhooks</li> <li>Adicione os IPs da Checkmob \u00e0 sua lista de IPs permitidos</li> </ol>"},{"location":"webhook/security/#ips-da-checkmob","title":"IPs da Checkmob","text":"<pre><code>203.0.113.1\n203.0.113.2\n203.0.113.3\n</code></pre>"},{"location":"webhook/security/#ssltls","title":"SSL/TLS","text":""},{"location":"webhook/security/#requisitos","title":"Requisitos","text":"<ul> <li>Use HTTPS para todos os endpoints de webhook</li> <li>Mantenha certificados SSL atualizados</li> <li>Configure redirecionamentos HTTP para HTTPS</li> <li>Use TLS 1.2 ou superior</li> </ul>"},{"location":"webhook/security/#configuracao-do-servidor","title":"Configura\u00e7\u00e3o do Servidor","text":"<pre><code>server {\n    listen 443 ssl;\n    server_name seu-dominio.com;\n\n    ssl_certificate /caminho/para/certificado.crt;\n    ssl_certificate_key /caminho/para/chave.key;\n\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n\n    location /webhook {\n        proxy_pass http://localhost:3000;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre>"},{"location":"webhook/security/#boas-praticas","title":"Boas Pr\u00e1ticas","text":""},{"location":"webhook/security/#1-validacao-de-dados","title":"1. Valida\u00e7\u00e3o de Dados","text":"<ul> <li>Valide todos os dados recebidos</li> <li>Verifique tipos de dados e formatos</li> <li>Implemente limites de tamanho para payloads</li> <li>Sanitize dados antes do processamento</li> </ul>"},{"location":"webhook/security/#2-tratamento-de-erros","title":"2. Tratamento de Erros","text":"<ul> <li>Registre todas as tentativas de acesso</li> <li>Implemente rate limiting</li> <li>Monitore padr\u00f5es suspeitos</li> <li>Mantenha logs de seguran\u00e7a</li> </ul>"},{"location":"webhook/security/#3-monitoramento","title":"3. Monitoramento","text":"<ul> <li>Configure alertas para falhas de autentica\u00e7\u00e3o</li> <li>Monitore taxas de erro</li> <li>Acompanhe tempos de resposta</li> <li>Verifique regularmente os logs</li> </ul>"},{"location":"webhook/security/#checklist-de-seguranca","title":"Checklist de Seguran\u00e7a","text":"<ul> <li>[ ] Implementar verifica\u00e7\u00e3o de assinatura</li> <li>[ ] Configurar lista de IPs permitidos</li> <li>[ ] Usar HTTPS em todos os endpoints</li> <li>[ ] Implementar valida\u00e7\u00e3o de dados</li> <li>[ ] Configurar monitoramento</li> <li>[ ] Manter certificados SSL atualizados</li> <li>[ ] Implementar rate limiting</li> <li>[ ] Configurar logs de seguran\u00e7a </li> </ul>"}]}